<% layout("/layouts/boilerplate.ejs") %>

<body>
    <div class="container mt-5">
        <h3 class="text-center mb-4">Create New Listing</h3>
        
        <form action="/listings" method="post" class="bg-light p-4 rounded shadow-sm needs-validation" novalidate enctype="multipart/form-data">

            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input type="text" name="title" placeholder="Add the catchy title" class="form-control" required>
                <div class="valid-feedback">
                   Title Looks good!
                  </div>
            </div>

            
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea name="description" placeholder="Enter Description" class="form-control" rows="3" required></textarea>
                <div class="invalid-feedback">
                    Please enter the valid Description
                     </div>
            </div>

            <!-- <div class="mb-3">
                <label for="img" class="form-label">Image URL</label>
                <input type="url" name="image" placeholder="Enter img URL/Link" class="form-control">
            </div> -->
            
            <div class="mb-3">
                <label for="img" class="form-label">Upload image</label>
                <input type="file" name="image" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="price" class="form-label">Price</label>
                <input  name="price" placeholder="1200" class="form-control" min="0" required>
                <div class="invalid-feedback">
                  Please enter the valid Price
                   </div>
            </div>

            <div class="mb-3">
                <label for="location" class="form-label">Location</label>
                <input type="text" name="location" placeholder="Mumbai,Maharashtra" class="form-control" required>
                <div class="invalid-feedback">
               Please enter Location
                   </div>
            </div>

            <div class="mb-3">
                <label for="country" class="form-label">Country</label>
                <input type="text" name="country" placeholder="India" class="form-control" required>
                <div class="invalid-feedback">
                    Please enter the country name
                   </div>
            </div>

            <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Add Listing</button>
            </div>
        </form>
    </div>
    <!-- js for the price should not be negative -->
    <script>
        // JavaScript for additional form validation
        document.getElementById("listingForm").addEventListener("submit", function (event) {
            const priceInput = document.getElementById("price");

            // Custom validation for price to check if it's less than 0
            if (priceInput.value < 0) {
                event.preventDefault(); // Prevent form submission
                priceInput.setCustomValidity("Price should not be negative.");
                priceInput.classList.add("is-invalid");
            } else {
                priceInput.setCustomValidity(""); // Clear any custom validation messages
                priceInput.classList.remove("is-invalid");
            }
        });
    </script>
</body>
